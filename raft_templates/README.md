# {{project_name}} a Raft ESP32 app generated by raft new

The simplest way to build this application depends on your operating system. In all cases the build commands should be executed from a terminal in the base folder of the project - the one which contains this README.md file.

## Building with a Docker image

Building with Docker is generally the best option as it removes the necessity to install the Espressif ESP IDF framework (and associated toolchain). In addition, if you are building a web-ui at the same time then it's dependencies are also simplified when building with Docker.

### Using make to build with a Docker image
If your operating system also has [make installed (or you are happy to install it)](https://www.gnu.org/software/make/)  then a build can be started simply with:

```
$ make
```

To flash the built firmware:
```
make flash PORT=<serial-port>
```
where \<serial-port> is the port to use.

To clean the build (if you need to force a rebuild, etc)
```
make clean
```

### Building with Docker directly from the command line

To start a docker build on Windows (without make):

```
> docker build -t raftbuilder . 
> docker run --rm -v .:/project -w /project raftbuilder
```

To start a docker build on Mac or Linux (without make):
```
$ docker build -t raftbuilder . && docker run --rm -v $(pwd):/project -w /project raftbuilder
```

### Building without Docker

To build without Docker then you will first need to ensure you have [installed the Espressif ESP IDF framework](https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/)

If you have make installed then you can use:

```
make DOCKER=0
```

Then follow the instructions for building using the ESP IDF but ensure that you use the -B option as follows:

```
idf.py -B build/<SysType> build
```
Where \<SysType> is the SysType you want to build
